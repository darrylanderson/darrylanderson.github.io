<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>Getting Started With Ghost on Google Cloud</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css" integrity="sha384-oS3vJWv+0UjzBfQzYUhtDYW+Pj2yciDJxpsK1OYPAYjqT085Qq/1cq5FLXAZQ7Ay" crossorigin="anonymous">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Noto+Serif|Open+Sans|Lora" rel="stylesheet">
    <style>
        body,
        .main-nav a,
        .post-meta,
        .post-card-excerpt,
        .post-full-content,
        .read-next-story .post:before,
        .pagination {
            font-family: "Lora", serif;
            font-size: 21px;
            line-height: 1.58;
        }
        h1, h2, h3, h4, h5, h6,
        .page-title,
        .subscribe-button,
        .floating-header,
        .site-nav,
        .site-footer {
            font-family: sans-serif;
        }
        /* This is necessary to not mess up share icons at bottom of posts */
        [class^="icon-"]:before, [class*=" icon-"]:before {
            font-family: "casper-icons", "Open Sans", sans-serif;
        }
        /* syntax highlighting */
        pre[class*=language-] {
            margin: 1.75em 0;
        }
    </style>
    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="Pragmatic Cloud Architecture" />
    <link rel="shortcut icon" href="/" type="image/png" />
    <link rel="canonical" href="/getting-started-with-ghost-on-google-cloud" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="Anderson Technology Consulting" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Getting Started With Ghost on Google Cloud" />
    <meta property="og:description" content="Pragmatic Cloud Architecture" />
    <meta property="og:url" content="/getting-started-with-ghost-on-google-cloud" />
    <meta property="og:image" content="/assets/images/cover-gce-ghost.jpeg" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:tag" content="Google Cloud" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Getting Started With Ghost on Google Cloud" />
    <meta name="twitter:description" content="Pragmatic Cloud Architecture" />
    <meta name="twitter:url" content="/" />
    <meta name="twitter:image" content="/assets/images/cover-gce-ghost.jpeg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Anderson Technology Consulting" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Google Cloud" />
    <meta name="twitter:site" content="@DarrylAnderson_" />
    <meta name="twitter:creator" content="@DarrylAnderson_" />
    <meta property="og:image:width" content="2000" />
    <meta property="og:image:height" content="666" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "Anderson Technology Consulting",
        "logo": "/"
    },
    "url": "/getting-started-with-ghost-on-google-cloud",
    "image": {
        "@type": "ImageObject",
        "url": "/assets/images/cover-gce-ghost.jpeg",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "/getting-started-with-ghost-on-google-cloud"
    },
    "description": "Pragmatic Cloud Architecture"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Getting Started With Ghost on Google Cloud" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="/">Anderson Technology Consulting</a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About Me</a></li>
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
              <a href="https://linkedin.com/in/darryl-anderson" target="_blank" rel="noopener">
             <i class="fab fa-linkedin"></i> linkedin
          </a>
          &nbsp;&nbsp;
          <a href="https://github.com/darrylanderson" target="_blank" rel="noopener">
            <i class="fab fa-github"></i> github
          </a>
          &nbsp;&nbsp;
          <a href="https://twitter.com/DarrylAnderson_" target="_blank" rel="noopener">
            <i class="fab fa-twitter"></i> twitter
          </a>
          &nbsp;&nbsp;
        </div>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="17 January 2018">17 January 2018</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/google-cloud/'>GOOGLE CLOUD</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">Getting Started With Ghost on Google Cloud</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/assets/images/cover-gce-ghost.jpeg)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <p>A while back I started looking for a blogging platform. In my previous companies, when we were just starting up I was often asked “we need a quick blog site for marketing… can you get something up quickly?”. The usual choice was WordPress, which always started out great, but over time became more and more of a headache to operate. Especially since I wanted a completely hands-off solution. I decided there had to be something better. Enter <a href="http://ghost.org">Ghost</a>.</p>

<p>With a tech stack consisting of Node.js, Ember.js, and Handlebars, Ghost is a pleasure to install and operate. In less than 30 minutes I had everything running and ready to go.</p>

<p>I also wanted to learn more about Google Cloud. Having created large scale architectures on AWS and Azure, I was familiar with their offerings but hadn’t yet explored Google Cloud. This was a perfect opportunity to set up a real service using GCE.</p>

<hr />
<h2 id="google-cloud-infrastructure">Google Cloud Infrastructure</h2>
<p>After creating your Google Cloud free tier account, you should be able to log in to the <a href="https://console.cloud.google.com">console</a> and see your dashboard.</p>

<p>For the purposes of this guide, we’ll keep things simple and use the <code class="highlighter-rouge">default</code> VPC network. For more advanced configurations (HA, test/staging, etc) you’ll want to create separate VPCs and subnets.</p>

<h3 id="create-vm">Create VM</h3>

<p>Open the Google Cloud console and go to the <code class="highlighter-rouge">Compute Engine -&gt; VM instances</code> page. Click on <code class="highlighter-rouge">Create Instance</code>.</p>

<p>Choose a VM name, select a zone (here we’ve chosen us-central1-a), and change the machine type. Since we’re trying to stay in the free tier, we use the <code class="highlighter-rouge">f1.micro</code> instance type.</p>

<p>Ghost is supported on Ubuntu 16.04, so be sure to change the boot disk type to that image.</p>

<p>Enable HTTP and HTTPS traffic, then create the instance.</p>

<p><img src="/content/images/2018/01/gce-vm.png" alt="gce-vm" /></p>

<h3 id="create-ssh-key">Create SSH Key</h3>

<p>On your local workstation, create an SSH key using a command similar to the following:
<code class="highlighter-rouge">ssh-keygen -t rsa -b 4096 -C "myemail@mydomain.com"</code></p>

<p>This will create a private/public key pair in the location you choose.</p>

<p>To associate this key with your VM, go to the <code class="highlighter-rouge">Compute Engine -&gt; Metadata -&gt; SSH Keys</code> page in the Google Cloud console. Add a new key, and paste in the public key value.</p>

<p>You should now be able to ssh to your instance from your local workstation.
<code class="highlighter-rouge">ssh -i [private-key-location] [user]@[ip]</code></p>

<h3 id="assign-static-ip">Assign Static IP</h3>

<p>After the VM creation is complete, our instance will have an ephemeral public IP address assigned. We want to promote this address to a static IP address so that we can make the instance available to the public internet at a fixed location.</p>

<p>From the Google Cloud Console, go to <code class="highlighter-rouge">VPC network -&gt; External IP addresses</code>.</p>

<p>The external IP address assigned to your VM instance should be listed. Change the type from <code class="highlighter-rouge">Ephemeral</code> to <code class="highlighter-rouge">Static</code>.</p>

<p><img src="/content/images/2018/01/gce-static-ip.png" alt="gce-static-ip" /></p>

<h3 id="create-dns-entry">Create DNS Entry</h3>

<p>Now that we have a static IP address, we can create a DNS entry for our new blog. The process for adding DNS entries will vary depending on your domain registrar.</p>

<p>Let’s say your domain name is <code class="highlighter-rouge">mydomain.com</code>, and you want to host your blog at <code class="highlighter-rouge">blog.mydomain.com</code>. You need to add an A record which ties the subdomain name <code class="highlighter-rouge">blog</code> to the static IP address above. An example of this is shown here:</p>

<p><img src="/content/images/2018/01/dns-a-record-1.png" alt="dns-a-record-1" /></p>

<hr />

<h2 id="installing-ghost">Installing Ghost</h2>

<blockquote>
  <p>In order to squeeze everything into our tiny f1.micro instance, we opt for the sqlite3 database instead of MySQL. For a production site we should instead use the Google Cloud MySQL service (known as Google Cloud SQL).</p>
</blockquote>

<p>The <a href="http://https://docs.ghost.org/v1.0.0/docs/install">Ghost installation instructions</a> are very easy to follow. However, since I had to deviate from them a bit in order to account for sqlite3 as well as the low memory on the f1.micro instance, I’ll outline the steps I followed below.</p>

<ol>
  <li>
    <p>Create a swap file to give us more working memory:
<code class="highlighter-rouge">dd if=/dev/zero of=/var/swap bs=1k count=1024k
mkswap /var/swap
swapon /var/swap
echo '/var/swap swap swap default 0 0' &gt;&gt; /etc/fstab
</code></p>
  </li>
  <li>
    <p>Install nginx and Node.js:
<code class="highlighter-rouge">sudo apt-get update
sudo apt-get upgrade
sudo apt-get install nginx 
curl -sL https://deb.nodesource.com/setup_6.x | sudo -E bash 
sudo apt-get install nodejs
</code></p>
  </li>
  <li>
    <p>Install ghost-cli:
<code class="highlighter-rouge">sudo npm i -g ghost-cli</code></p>
  </li>
  <li>
    <p>Install sqlite3:
<code class="highlighter-rouge">sudo npm i -g sqlite3</code></p>
  </li>
  <li>
    <p>Install Ghost:
<code class="highlighter-rouge">sudo mkdir -p /var/www/ghost
sudo chown [user]:[user] /var/www/ghost
cd /var/www/ghost
ghost install --db sqlite3 --dbpath ./content/data/ghost.db
</code></p>
  </li>
</ol>

<hr />
<h2 id="enable-ssl">Enable SSL</h2>
<p><img src="/content/images/2018/01/le-logo-standard.png" alt="le-logo-standard" /></p>

<p>With the Let’s Encrypt service and EFF’s certbot, it’s easier than ever to obtain and install a free SSL certificate signed by a trusted CA.</p>

<p>First install <a href="https://certbot.eff.org/#ubuntuxenial-nginx">certbot</a>:
<code class="highlighter-rouge">sudo apt-get update
sudo apt-get install software-properties-common
sudo add-apt-repository ppa:certbot/certbot
sudo apt-get update
sudo apt-get install python-certbot-nginx
</code></p>

<p>Then run certbot to request and install the certificate into nginx:
<code class="highlighter-rouge">sudo certbot --authenticator webroot --installer nginx</code></p>

<p>After restarting nginx (<code class="highlighter-rouge">sudo service nginx restart</code>), your site should now redirect to https and use a valid certificate.</p>

<hr />
<h2 id="next-steps">Next Steps</h2>

<p>While this setup is suitable for a low-traffic blog, it doesn’t offer many of the characteristics we would expect of an enterprise level service.</p>

<p>The simplest approach to add some ‘enterpriseness’ to our blog is to outsource hosting to <a href="https://ghost.org/pricing/">Ghost Pro</a>. While I don’t have any personal experience with their service, it certainly looks attractive. Relatively low cost, automated backups, CDN, and we would be helping to support the efforts of the team behind the Ghost software.</p>

<p>But since we’re tinkerers and want to see what it would take to do this on our own, let’s explore some of the next steps if we want to continue operating the site ourselves…</p>

<h4 id="monitoring">Monitoring</h4>

<p><a href="http://pingdom.com">Pingdom</a> offers a free basic uptime monitoring service which can alert you if your blog is not available from any part of the globe. While the free version only offers email and push notifications, upgrading to the basic service adds SMS notifications.</p>

<p>For proactive monitoring, paid APM services such as <a href="http://newrelic.com">New Relic</a>, <a href="http://www.appdynamics.com">AppDynamics</a>, or <a href="http://www.dynatrace.com">Dynatrace</a> can be used.</p>

<p>Also, Google Cloud offers built-in monitoring through Stackdriver. I’m still looking into this approach.</p>

<h4 id="security">Security</h4>

<p>The basic configuration outlined in this post doesn’t separate the web tier from the data tier. One of the first steps should be to deploy MySQL in a private subnet with firewall rules that only allow traffic from the web tier.</p>

<p>Additionally, the web tier currently exposes SSH to the public internet. To avoid this, we should utilize a VPN tunnel. Then we can restrict SSH traffic to only flow from the VPN. I will be writing a future post where I describe how to deploy OpenVPN along with Google Authenticator to support a secure, low-cost VPN service.</p>

<h4 id="disaster-recovery">Disaster Recovery</h4>

<p>Given our cost comprimise of running sqlite3 directly on the same VM running Ghost, backing up our data can be done by creating a VM snapshot. While we could automate this process, a better approach is to use MySQL.</p>

<p>With MySQL through Google Cloud SQL we can configure a <a href="https://cloud.google.com/sql/docs/mysql/high-availability">failover replica</a>. This replica runs in a different zone than the master. If an outage occurs, a failover will automatically occur to the replica.</p>

<p>Google Cloud SQL also offers a <a href="https://cloud.google.com/sql/docs/mysql/backup-recovery/backups">robust backup facility</a>. While the failover replica provides data protection in the event of a single instance failure, if the entire cluster corrupts our data we need to restore from a backup.</p>

<h4 id="performance">Performance</h4>

<p>The <code class="highlighter-rouge">f1.micro</code> instance type is inadequate for anything other than a test site. The <code class="highlighter-rouge">n1-standard-1</code> with 3.75GB of RAM and 1 VCPU would be a better choice. Assuming it’s running an entire month, the cost would be around $25/month.</p>

<p>Using a CDN is an easy way to accelerate content delivery and reduce load on our server(s). Like other cloud providers, Google Cloud offers a robust CDN. Pricing is similar to AWS CloudFront.</p>

<hr />

<h2 id="wrapping-up">Wrapping Up</h2>
<p>Now that we have Ghost up and running on Google Cloud, it’s time to start configuring our blog and creating content. Visit the official Ghost Blog for a lot of great ideas:</p>

<p><a href="https://blog.ghost.org/">Ghost Blog</a></p>

<p>Going further, I’d like to set up an Ansible role to install and configure Ghost, and either use Ansible or something like Terraform to orchestrate creation of the Google Cloud infrastructure. But from a build/buy perspective, moving to Ghost Pro’s hosting service is probably a better move.</p>


                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/content/images/2018/03/ProfilePhoto-round-1.png" alt="darryl" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/darryl">Darryl Anderson</a></h4>
                                
                                    <p>Darryl provides technology advisement, design, and development services to early and growth stage software companies.</p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/darryl">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/running-ansible-at-scale">
                <div class="post-card-image" style="background-image: url(/assets/images/cover-ansible.jpeg)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/running-ansible-at-scale">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Devops</span>
                            
                        
                    

                    <h2 class="post-card-title">Running Ansible at Scale</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p></p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/content/images/2018/03/ProfilePhoto-round-1.png" alt="Darryl Anderson" />
                        
                        <span class="post-card-author">
                            <a href="/author/darryl/">Darryl Anderson</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="/">
            
            <span>Anderson Technology Consulting</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Getting Started With Ghost on Google Cloud</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Getting+Started+With+Ghost+on+Google+Cloud&amp;url=https://darrylanderson.dev/getting-started-with-ghost-on-google-cloud"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://darrylanderson.dev/getting-started-with-ghost-on-google-cloud"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="/">Anderson Technology Consulting</a> &copy; 2021</section>
                <section class="poweredby">Published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyller/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-112416473-1', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
